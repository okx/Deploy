# Updating hash on the X Layer Testnet (202407)
## 0 background
Mandatory for X Layer testnet zkevm-node RPCs(v0.3.x-v0.4.0). Otherwise, blocks cannot be synchronized from Trust RPC in real time, and only L1 synchronization can be performed, which leads to lagging behind.

## 1 Stop Sync Service
``` bash
docker-compose stop xlayer-sync
```
## 2 Update Database
``` bash
# Connect state database
PGPASSWORD=state_password psql -h 127.0.0.1 -p 5432 -d state_db -U state_user

# Delete l1 block and l2 batch
delete from state.block where block_num >= 9776;  
delete from state.batch where batch_num >= 450; 

# Update block hash
update state.l2block SET block_hash='0xcd197ed94b411383224264b94c558e213b18c42cb860abd1d4c0152de347ae08' WHERE block_num = 2201;

# Update block hash
update state.l2block SET header='{"hash": "0xcd197ed94b411383224264b94c558e213b18c42cb860abd1d4c0152de347ae08", "miner": "0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266", "nonce": "0x0000000000000000", "number": "0x899", "gasUsed": "0x0", "mixHash": "0x0000000000000000000000000000000000000000000000000000000000000000", "gasLimit": "0x4000000000000", "extraData": "0x", "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", "stateRoot": "0x16868ccf992fc8cebb04b59343bb12b4052bd9e298cf12a0c8506c4d6a3b61ad", "timestamp": "0x668fad65", "difficulty": "0x0", "parentHash": "0x7e0fe84bc648f625ccf9245064f8b6dfb7f6b27b60503887152d2616fb178228", "sha3Uncles": "0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347", "blobGasUsed": null, "receiptsRoot": "0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421", "baseFeePerGas": null, "blockInfoRoot": "0xb2ad73499d50ab2f9a5bbc383306d1493bf0980bd5a8de2feeaef0d6ad43fd8a", "excessBlobGas": null, "globalExitRoot": "0x0000000000000000000000000000000000000000000000000000000000000000", "withdrawalsRoot": null, "transactionsRoot": "0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421", "parentBeaconBlockRoot": null}'  WHERE block_num = 2201;
```
## 3 Restart Sync Service
``` bash
./run_xlayer_testnet.sh start
```